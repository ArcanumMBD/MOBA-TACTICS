CREATE TABLE UnitType
(
UnitTypeID INT NOT NULL,
Health INT,
Power INT,
Defence	INT,
ActionPnt INT,
Range INT,
PRIMARY KEY (UnitTypeID)
);

CREATE TABLE Unit
(
UnitID INT NOT NULL,
UnitType INT,
PRIMARY KEY (UnitID),
FOREIGN KEY (UnitType) REFERENCES UnitType(UnitTypeID)
);

CREATE TABLE Roster
(
RosterID INT NOT NULL,
LastEditted SMALLTIMEDATE,
Unit1ID INT,
Unit2ID INT,
Unit3ID INT,
PRIMARY KEY (RosterID),
FOREIGN KEY (Unit1ID) REFERENCES Unit(UnitID),
FOREIGN KEY (Unit2ID) REFERENCES Unit(UnitID),
FOREIGN KEY (Unit3ID) REFERENCES Unit(UnitID)
);

CREATE TABLE RosterList
(
RosterListID INT NOT NULL,
Roster1ID INT,
Roster2ID INT,
Roster3ID INT,
PRIMARY KEY (RosterListID),
FOREIGN KEY (Roster1ID) REFERENCES Roster(RosterID),
FOREIGN KEY (Roster2ID) REFERENCES Roster(RosterID),
FOREIGN KEY (Roster3ID) REFERENCES Roster(RosterID)
);

CREATE TABLE Users
(
UserID INT NOT NULL,
Username VARCHAR(20) NOT NULL,
PasswordHash VARCHAR(20) NOT NULL,
Currency INT DEFAULT 0,
RosterID INT,
PRIMARY KEY (UserID),
FOREIGN KEY (RosterID) REFERENCES RosterList(RosterListID)
);

CREATE TABLE Map
(
MapID INT NOT NULL,
MapData XML,
PRIMARY KEY (MapID)
);

CREATE TABLE Game
(
GameID INT NOT NULL,
MapID INT NOT NULL,
UserID1	INT,
UserID2	INT,
UserID3 INT,
UserID4 INT,
PRIMARY KEY (GameID),
FOREIGN KEY (MapID) REFERENCES Map(MapID),
FOREIGN KEY (UserID1) REFERENCES Users(UserID),
FOREIGN KEY (UserID2) REFERENCES Users(UserID),
FOREIGN KEY (UserID3) REFERENCES Users(UserID),
FOREIGN KEY (UserID4) REFERENCES Users(UserID)
);